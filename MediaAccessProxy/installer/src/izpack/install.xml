<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>
<!--
This file is part of Volantis Mobility Server. 

Volantis Mobility Server is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Volantis Mobility Server is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Volantis Mobility Server.  If not, see <http://www.gnu.org/licenses/>. 
-->

<installation version="1.0" xmlns:xi="http://www.izforge.com/izpack/include">
    <!-- 
        The info section.
        The meaning of the tags should be natural ...
    -->
    <info>
        <appname>Media Access Proxy</appname>
        <appversion>1.0</appversion>
        <authors>
            <author name="Volantis Systems Ltd." email="info@volantis.com"/>
        </authors>
        <url>http://www.volantis.com/</url>
 	<summarylogfilepath>$INSTALL_PATH/Uninstaller/MAPInstallSummary.html</summarylogfilepath>
    </info>
    
    <!-- 
        The gui preferences indication.
        Sets the installer window to 640x480. It will not be able to change the size.
    -->
    <guiprefs width="800" height="600" resizable="yes">
        <modifier key="showDebugWindow" value="true"/>
        <modifier key="headingPanelCounter" value="progressbar"/>
        <modifier key="headingPanelCounterPos" value="inNavigationPanel"/>
        <modifier key="useHeadingPanel" value="yes"/>
        <modifier key="useHeadingForSummary" value="no"/>
        <modifier key="headingLineCount" value="0"/>
        <modifier key="headingImageBorderSize" value="0"/>
        <modifier key="headingBackgroundColor" value="0x00335e98"/>
        <modifier key="headingForegroundColor" value="0x00335e98"/>
    </guiprefs>

    
    <!-- 
        The locale section.
        Asks here to include the English and French langpacks.
    -->
    <locale>
        <langpack iso3="eng"/>
    </locale>

    <listeners>
        <listener installer="SummaryLoggerInstallerListener"/>
    </listeners>
    <!-- 
        The resources section.
        The ids must be these ones if you want to use the LicencePanel and/or the InfoPanel.
    -->
    <resources>
        <res id="HTMLLicencePanel.licence" src="License.htm"/>
        <res id="HTMLInfoPanel.info" src="Readme.htm"/>
        <res id="userInputSpec.xml" src="userInputSpec.xml"/> 
        <res id="CustomLangpack.xml" src="customLangpack.xml"/>


        <!-- images: banner, and left side image -->
        <res id="Heading.image" src="img/map_installer_banner.png"/>

        <!-- custom icons description -->
        <res id="customicons.xml" src="customicons.xml"/>

        <!-- custom icons -->
        <res id="star.png" src="img/star.png"/>
        <res id="important.png" src="img/important.png"/>
        <res id="gear.png" src="img/gear.png"/>
        <res id="notepad.png" src="img/notepad.png"/>
     </resources>
    <variables>
        <variable name="InstallerFrame.cleanAllAtInterrupt" value="no"/>
    </variables>

    <!-- 
        The panels section.
        We indicate here which panels we want to use. The order will be respected.
    -->
    <panels>
        <panel classname="HelloPanel"/>
        <!--panel classname="HTMLInfoPanel"/-->
        <panel classname="HTMLLicencePanel"/>

        <panel classname="TreePacksPanel"/>
        <panel classname="UserInputPanel"/>
        <panel classname="UserInputPanel"/>        
<!--
        <panel classname="DataCheckPanel" /> 
-->
        <panel classname="TargetPanel"/> 
	<panel classname="SummaryPanel" />
        <panel classname="InstallPanel"/>
        <panel classname="FinishPanel"/> 
    </panels>

    <!-- 
        The packs section.
        We specify here our packs.
    -->
    <packs>  
        <pack name="Media Access Proxy" required="yes" id="com.volantis.map.core.pack">
            <description>Media Access Proxy (MAP)</description>
            <fileset dir="../../target/classes/map"  targetdir="${INSTALL_PATH}/webapps/map">
                <include name="**/*"/>
            </fileset>
            <fileset dir="../../target/classes/jars" targetdir="${INSTALL_PATH}/webapps/map/WEB-INF/osgi/bundles">
                <include name="**/*"/>
                <!-- exclude jars from other packs -->
                <exclude name="batik-all*"/>
                <exclude name="map.svg*"/>
		<exclude name="map.ics*"/>
                <exclude name="map.ics*"/>
                <exclude name="map.image-processor*"/>
                <exclude name="map.sti*"/>
                <exclude name="map.identity*"/>
            </fileset>
            <parsable targetfile="${INSTALL_PATH}/webapps/map/WEB-INF/web.xml" type="xml"/>        
	    <parsable targetfile="${INSTALL_PATH}/webapps/map/WEB-INF/map-log4j.xml" type="xml"/>        
        </pack>

        <pack name="Image Conversion Service" required="no" depends="com.volantis.map.core.pack" id="com.volantis.map.ics.pack">
            <description>The Image Conversion Service (ICS) can transcode images between various image
formats. It can also perform scaling and watermarking operations. It is
recommended that this be installed. Installation of this module will also install
a servlet that allows map to behave like earlier versions of ICS</description>
            <fileset dir="../../target/classes/ics" targetdir="$INSTALL_PATH/webapps/map">
                <include name="**/*"/>
            </fileset>
            <fileset dir="../../target/classes/jars" targetdir="${INSTALL_PATH}/webapps/map/WEB-INF/osgi/bundles">
                <include name="batik-all*"/>
                <include name="map.svg*"/>
                <include name="map.ics*"/>
                <include name="map.image-processor*"/>
            </fileset>
            <parsable targetfile="${INSTALL_PATH}/webapps/map/WEB-INF/ics-config.xml" type="xml"/>
        </pack>


        <pack name="Example Service" required="no" depends="com.volantis.map.core.pack" id="com.volantis.map.example.pack">
            <description>A simple plugin service that just returns the request url</description>
            <fileset dir="../../target/classes/jars" targetdir="${INSTALL_PATH}/webapps/map/WEB-INF/osgi/bundles">
                <include name="map.identity*"/>
            </fileset>
        </pack>

        <pack name="Standard Transcoder Interface" preselected="no" required="no" depends="com.volantis.map.core.pack" id="com.volantis.map.sti.pack">
            <description>The Standard Transcoder Service (STI) plugin allows Media Access Proxy
to convert simple get requests into complex STI requests that can be directed to a specified STI provider.</description>
            <fileset dir="../../target/classes/sti" targetdir="$INSTALL_PATH/webapps/map">
                <include name="**/*"/>
            </fileset>
             <parsable targetfile="${INSTALL_PATH}/webapps/map/WEB-INF/osgi/config/com.volantis.map.sti.impl.STIOperation"/>

            <fileset dir="../../target/classes/jars" targetdir="${INSTALL_PATH}/webapps/map/WEB-INF/osgi/bundles">
                <include name="map.sti*"/>
            </fileset>

        </pack>
    </packs>

</installation>
