<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/xml;charset=UTF-8"/>
      <title>Controlling stylesheet caching</title>
      <link rel="stylesheet" href="../volantis.css"/>
   </head>
   <body>
      <h1>Controlling stylesheet caching</h1>
      
      <p>In the <span class="filepath">mcs-config.xml</span> file you can
         specify the way that MCS caches generated style information
         from theme policies.</p>
      
         
      <h2>Setting policy caching</h2>
         
      <p>If you haven't already enabled the
            <span class="code">theme-cache</span> element in the <span class="code">
               policy-cache</span> section of the configuration
            file, you must do so. Otherwise MCS will never use or
            cache generated style sheets, and changes made to themes
            are reflected immediately.</p>
      
      
         
      <h2>Stylesheet caching</h2>
         
      <p>The stylesheets generated by MCS are cached in memory. The
               <span class="code">max-age</span> attribute on the
               <span class="code">page-level-generation</span> element sets
            the maximum length of time in seconds that an entry may
            remain in the cache.</p>
         
      <p class="note">
         <strong>Note</strong>: The <span class="code">max-age</span> attribute on the
               <span class="code">style-sheets</span> element, the 
            <span class="code">internal-generation</span> element and the <span class="code">mcsServerManager</span>
            command line option <span class="code">flush-generated-styles</span>
            have no effect.
             </p>
      
      
         
      <h2>Enabling external generation</h2>
         
      <p>To specify external style sheets, the
               <span class="code">external-generation</span> element must be
            present in the configuration file. The <span class="code">cache</span>
            and <span class="code">flush-on-restart</span> attribute no longer have
            any effect. However the required <span class="code">base-directory</span> is
            retained for backward compatibility, and the value must
            point to an existing location with a subdirectory named
            'cssFileCache'. The <span class="code">base-url</span> attribute points
            to the location of the external generation servlet.</p>
         
      <pre class="code">&lt;style-sheets&gt;
   &lt;external-generation
      base-directory="[path]/mcs/css"
      base-url="[context_root]/MCSCSS"/&gt;
&lt;/style-sheets&gt;</pre>
         
      <p class="note">
         <strong>Note</strong>: MCS will generate a small amount of inline style
            information for some XDIME elements such as
               <span class="code">xfforms</span> and <span class="code">menu</span>,
            even when you have specified external stylesheet
            generation.</p>
      
      
         
      <p>
         <span class="ri">Related topics</span>
         <br/>
         <a href="../admin/mcs_configure.html">Configuring MCS</a>
         <br/>
         <a href="../admin/mcs_config_policy_cache.html">Configuring the policy caches</a>
         <br/>
         <a href="../mcs_config/config_page_level_generation.html">page-level-generation</a>
         <br/>
         <a href="../mcs_config/config_external_generation.html">external-generation</a>
      </p>
      
   
   </body>
</html>