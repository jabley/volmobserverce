<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <meta content="application/xhtml+xml" http-equiv="Content-Type"/>
      <title>Passing parameters in transforms</title>
      <link rel="stylesheet" href="../volantis.css"/>
   </head>
   <body>
      <h1>Passing parameters in transforms</h1>
        
      <p>The <span class="code">pipeline:parameter</span> element specifies the name and value of each parameter. The value may be passed as a DCI expression using the <span class="code">value</span> attribute or as body content if it is a text element or complex infoset.</p>
            
      <p>You can define a single <span class="code">pipeline:parameters</span> element as the first child of a <span class="code">pipeline:transform</span>. It can contain one or more <span class="code">pipeline:parameter</span> elements. All the XSL transforms that you refer to in the related <span class="code">pipeline:transformation</span> elements must declare a <span class="code">xsl:param</span> element with a name matching each of the pipeline parameters.</p>
     
      <h2>Simple parameters</h2>      
            
      <p>The example demonstrates a <span class="code">transform</span> element with a parameter block declared:</p>
			

			
      <pre class="code">
&lt;transform&gt;
   &lt;parameters&gt;
      &lt;parameter name="title-param" value="Title"/&gt;
      &lt;parameter name="artist-param" value="Artist"/&gt;
   &lt;parameters&gt;
   &lt;transformation href='simple-params.xsl'/&gt;
      &lt;catalog&gt;
         &lt;cd&gt;
            &lt;title&gt;Pavarotti Gala Concert&lt;/title&gt;
            &lt;artist&gt;Luciano Pavarotti&lt;/artist&gt;
            &lt;country&gt;UK&lt;/country&gt;
            &lt;company&gt;DECCA&lt;/company&gt;
            &lt;price&gt;9.90&lt;/price&gt;
            &lt;year&gt;1991&lt;/year&gt;
         &lt;/cd&gt;
         &lt;cd&gt;
            &lt;title&gt;The dock of the bay&lt;/title&gt;
            &lt;artist&gt;Otis Redding&lt;/artist&gt;
            &lt;country&gt;USA&lt;/country&gt;
            &lt;company&gt;Atlantic&lt;/company&gt;
            &lt;price&gt;7.90&lt;/price&gt;
            &lt;year&gt;1987&lt;/year&gt;
         &lt;/cd&gt;
      &lt;/catalog&gt;
   &lt;transformation&gt;
&lt;/transform&gt;</pre>
		
		 
      <p>The transform references the stylesheet <span class="filepath">simple-params.xsl</span>. It defines the global <span class="code">xsl:param</span> names 'title-param' and 'artist-param' that are later referenced in the template like any other XSL parameter or variable, and output as table column headers.</p>
            
      <p>The names of the pipeline parameters match an equivalent <span class="code">xsl:param</span> element in the stylesheet that follows. If the <span class="code">transform</span> element contained multiple <span class="code">transformation</span> elements the parameters would be passed to the stylesheet for each transformation.</p>
            

				
      <pre class="code">
&lt;xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
   &lt;xsl:param name="title-param"/&gt;
   &lt;xsl:param name="artist-param"/&gt;

   &lt;xsl:template match="/"&gt;
   &lt;html&gt;
      ...
      &lt;body&gt;
      &lt;table&gt;
	     &lt;tr&gt;
         &lt;th&gt;&lt;xsl:value-of select="$title-param"/&gt;&lt;/th&gt;
         &lt;th&gt;&lt;xsl:value-of select="$artist-param"/&gt;&lt;/th&gt;
         &lt;/tr&gt;
         &lt;xsl:for-each select="catalog/cd"&gt;
            &lt;tr&gt;
               &lt;td&gt;&lt;xsl:value-of select="title"/&gt;&lt;/td&gt;
               &lt;td&gt;&lt;xsl:value-of select="artist"/&gt;&lt;/td&gt;
            &lt;/tr&gt;
         &lt;/xsl:for-each&gt;
      &lt;/table&gt;
      &lt;/body&gt;
   &lt;/html&gt;
   &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</pre>
            
             
		
		
			
      <h2>Complex parameters</h2>
		
      <p>A pipeline parameter may also be expressed as an XML infoset. The infoset is not restricted to containing a single root element; it can be a document fragment with multiple root level elements.</p>
	
            
               
      <pre class="code">
&lt;transform&gt;
   &lt;parameters&gt;
      &lt;parameter name="complex-params"&gt;
         &lt;root1&gt;
            &lt;title value="Title"/&gt;
         &lt;/root1&gt;
         &lt;root2&gt;
            &lt;child1&gt;
               Some arbitrary unused text
               &lt;arandomelement/&gt;
            &lt;/child1&gt;
            &lt;child2&gt;
               &lt;anotherrandomelement/&gt;
               &lt;name value="Artist"/&gt;
            &lt;/child2&gt;
         &lt;/root2&gt;
         ...
      &lt;/parameter&gt;
      &lt;parameter name="artist-param" value="Artist"/&gt;
   &lt;/parameters&gt;
   &lt;transformation href='mixed-params.xsl'/&gt;
   &lt;catalog&gt;
      &lt;cd&gt;
         &lt;title&gt;Pavarotti Gala Concert&lt;/title&gt;
         &lt;artist&gt;Luciano Pavarotti&lt;/artist&gt;
         &lt;country&gt;UK&lt;/country&gt;
         &lt;company&gt;DECCA&lt;/company&gt;
         &lt;price&gt;9.90&lt;/price&gt;
         &lt;year&gt;1991&lt;/year&gt;
      &lt;/cd&gt;
      &lt;cd&gt;
         &lt;title&gt;The dock of the bay&lt;/title&gt;
         &lt;artist&gt;Otis Redding&lt;/artist&gt;
         &lt;country&gt;USA&lt;/country&gt;
         &lt;company&gt;Atlantic&lt;/company&gt;
         &lt;price&gt;7.90&lt;/price&gt;
         &lt;year&gt;1987&lt;/year&gt;
      &lt;/cd&gt;
   &lt;/catalog&gt;
&lt;/transform&gt;</pre>
            
            
            
      <p>The XSL stylesheet used to process the infoset is <span class="filepath">mixed-params.xsl</span>. The <span class="code">xsl:param</span> name 'complex-params' is declared like any other XSL parameter. The value of the parameter is an infoset that may be traversed like any standard infoset parameter or variable. The next example shows that the required value for the table header is selected from an attribute on a child of one of the root level elements.</p>
            
               
      <pre class="code">
&lt;xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
   &lt;xsl:param name="complex-params"/&gt;
   &lt;xsl:param name="artist-param"/&gt;

   &lt;xsl:template match="/"&gt;
   &lt;html&gt;
      ...
      &lt;body&gt;
      &lt;table&gt;
         &lt;tr&gt;
         &lt;th&gt;
         &lt;xsl:value-of select="$complex-params/root1/title/@value"/&gt;
         &lt;/th&gt;
         &lt;th&gt;&lt;xsl:value-of select="$artist-param"/&gt;&lt;/th&gt;
         &lt;/tr&gt;
         &lt;xsl:for-each select="catalog/cd"&gt;
            &lt;tr&gt;
               &lt;td&gt;&lt;xsl:value-of select="title"/&gt;&lt;/td&gt;
               &lt;td&gt;&lt;xsl:value-of select="artist"/&gt;&lt;/td&gt;
            &lt;/tr&gt;
         &lt;/xsl:for-each&gt;
      &lt;/table&gt;
   &lt;/body&gt;
   &lt;/html&gt;
   &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</pre>
            
           	
		

         
            
      <p>
         <span class="ri">Related topics</span>
         <br/>
         <a href="../dci/dci_transform.html">Using transforms</a>
      </p>
         
      
   </body>
</html>