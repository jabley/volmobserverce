<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <meta content="application/xhtml+xml" http-equiv="Content-Type"/>
      <title> Getting XML from a database</title>
      <link rel="stylesheet" href="../volantis.css"/>
   </head>
   <body>
      <h1 class="ocp">Getting XML from a database</h1>
			
      <p>It is often useful to store XML in a SQL database, and use it in the pipeline as XML, rather than plain text.</p>
			
      <p>Because SQL does not distinguish between the different types of structured data that may be stored in a column, additional information is needed. This information is provided using the <span class="code">column</span> element.</p>
			
      <p>Any number of <span class="code">column</span> elements are allowed in a query, after any parameters. Inside each column the <span class="code">mdc:parseAsXML</span> element contains the information needed by the SQL driver to parse the column values. The <span class="code">parse</span> attribute determines whether the content of the column is treated as en entire document or an XML fragment. The other attributes provide default namespace prefix and URI values for the parsed material.</p>
			
      <p>In this example the abstract column contains markup.</p>
			
				
      <pre class="code">&lt;sqld:query
   datasource="PressReleases" 
   sql="select TITLE,ABSTRACT 
      from PRESS_RELEASES 
      where STORY = ?"&gt;
   &lt;sqld:string value="%{request:getParameter('STORY')}"/&gt;
   &lt;sqld:column name="ABSTRACT"&gt;
      &lt;mdc:parseAsXML
         defaultNsPrefix="pr"
         defaultNsURI="http://mycorp.com/schemas/pr"/&gt; 
   &lt;/sqld:column&gt;
    ...
&lt;/sqld:query&gt;</pre>
				
      <p>In the next example the content is parsed as a document fragment as it can have multiple root elements and top level character data. If the content does not specify a namespace, the default namespace information is used.</p>
			
      <pre class="code">
&lt;sqld:column name="CONTENT"&gt; 
&lt;mdc:parseAsXML
   parse="fragment"
   defaultNsPrefix="pr"
   defaultNsURI="http://mycorp.com/schemas/pr"/&gt;  
&lt;/sqld:column&gt; </pre>
	

		
			
      <p>
         <span class="ri">Related topics</span>
         <br/>
         <a href="../dci/dci_sql_driver.html">Using databases</a>
      </p>
		
	
   </body>
</html>