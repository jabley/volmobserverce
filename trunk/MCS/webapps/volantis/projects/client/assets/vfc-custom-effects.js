
var UpdatedExecuter=Class.create();UpdatedExecuter.prototype={interval:null,initialize:function(callback,frequency){this.callback=callback;this.frequency=frequency;this.currentlyExecuting=false;this.interval=this.registerCallback();},registerCallback:function(){return setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},stop:function(){clearInterval(this.interval);},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.callback();}finally{this.currentlyExecuting=false;}}}};var CustomEffects={specialElementGetMethods:{opacity:'getOpacity'},specialElementSetMethods:{opacity:'setOpacity'},getOpacity:function(element){var result={};result.value=element.getOpacity();result.unit=undefined;return result;},specialEffectMethods:{width:'getWidth',height:'getHeight',lineHeight:'getLineHeight',fontSize:'getFontSize',top:'getTop',left:'getLeft',opacity:'getOpacity'},getTop:function(element){var result={};var position=element.getStyle('position');if(position=='static'){result.value=0;result.unit='px';}else if(position=='relative'){result.value=0;result.unit='px';}else if(position=='absolute'||position=='fixed'){var offsets;if(!Widget.supportsFixed()){offsets=Position.positionedOffset(element);}else{offsets=Position.fixedOffset(element);}
result.value=offsets[1];result.unit='px';}
return result;},getLeft:function(element){var result={};var position=element.getStyle('position');if(position=='static'){result.value=0;result.unit='px';}else if(position=='relative'){result.value=0;result.unit='px';}else if(position=='absolute'||position=='fixed'){var offsets;if(!Widget.supportsFixed()){offsets=Position.positionedOffset(element);}else{offsets=Position.fixedOffset(element);}
result.value=offsets[0];result.unit='px';}
return result;},getRight:function(element){return{value:0,unit:'%'};},getBottom:function(element){return{value:0,unit:'%'};},getHeight:function(element){var result={};var styleValue=element.getStyle('height');if((!styleValue)||(styleValue=='auto')){result.value=element.getDimensions().height;result.unit='px';}else{result.value=parseFloat(styleValue);result.unit=styleValue.toString().replace(result.value.toString(),"");}
return result;},getWidth:function(element){var result={};var styleValue=element.getStyle('width');if((!styleValue)||(styleValue=='auto')){result.value=100;result.unit='%';}else{result.value=parseFloat(styleValue);result.unit=styleValue.toString().replace(result.value.toString(),"");}
return result;},getLineHeight:function(element){var result={};var styleValue=element.getStyle('lineHeight');if(!styleValue||styleValue===''||styleValue==='normal'){result.value=100;result.unit='%';}else{result.value=parseFloat(styleValue);result.unit=styleValue.toString().replace(result.value.toString(),"");}
return result;},getFontSize:function(element){var result={};var styleValue=element.getStyle('fontSize');if(!styleValue){result.value=100;result.unit='%';}else{var value=parseFloat(styleValue);if(isNaN(value)){result.value=100;result.unit='%';}else{result.value=value;result.unit=styleValue.toString().replace(value.toString(),"");}}
return result;},_createOuterDiv:function(element){var newDiv=document.createElement('div');newDiv=$(newDiv);var pos=element.getStyle('position');var dim=element.getDimensions();var offset=Position.positionedOffset(element);var left=element.getStyle('left');if(pos=='absolute'||pos=='fixed'){element._oldTop={top:offset[1],left:offset[0]};element.setStyle({top:0,left:0});}
if(Prototype.msieBrowser()&&pos=='static'){newDiv.setStyle({position:'relative',overflow:'hidden',width:dim.width+'px',height:dim.height+'px',top:'0px',left:'0px'});}else{newDiv.setStyle({position:pos,overflow:'hidden',width:dim.width+'px',height:dim.height+'px',top:offset[1]+'px',left:offset[0]+'px'});}
return newDiv;},_removeOuterDiv:function(element){var parent=$(element.parentNode);var mainElement=parent.parentNode;mainElement.insertBefore(element,parent);mainElement.removeChild(parent);var pos=element.getStyle('position');if(pos=='absolute'||pos=='fixed'){element.setStyle({top:element._oldTop.top+'px',left:element._oldTop.left+'px'});}}};CustomEffects.EmptyEffectStrategy={affectedStyles:[],calculatedStyles:[],modifiedStyles:{},transition:function(pos,stylesStruct){},initInternalValues:function(element){}};CustomEffects.PulsateEffectStrategy={affectedStyles:['opacity'],calculatedStyles:['opacity'],transition:function(pos,stylesStruct){var result={};result.opacity=((Math.floor(pos*10)%2===0?(pos*10-Math.floor(pos*10)):(1-(pos*10-Math.floor(pos*10)))));return result;}};CustomEffects.ShakeEffectStrategy={affectedStyles:['left','position'],calculatedStyles:['left'],_moveRange:20,_base:0.1,_turnPoints:[0.1,0.3,0.5,0.7,0.9],transition:function(pos,stylesStruct){var result={};var offset;var left=stylesStruct.left.value;if(pos<this._turnPoints[0]){offset=-(pos/this._base);}else if(pos<this._turnPoints[1]){offset=(pos-this._turnPoints[0]-this._base)/this._base;}else if(pos<this._turnPoints[2]){offset=(this._turnPoints[1]+this._base-pos)/this._base;}else if(pos<this._turnPoints[3]){offset=(pos-this._turnPoints[2]-this._base)/this._base;}else if(pos<this._turnPoints[4]){offset=(this._turnPoints[3]+this._base-pos)/this._base;}else{offset=(pos-this._turnPoints[4]-this._base)/this._base;}
result.left=left+offset*this._moveRange+"px";return result;},modifiedStyles:{position:['relative','absolute','fixed']}};CustomEffects.FoldEffectStrategy={affectedStyles:['width','height','overflow'],calculatedStyles:['width','height'],_minHeight:0.05,_turnPoint:0.5,transition:function(pos,stylesStruct){var newStruct={};if(pos<this._turnPoint){newStruct.height=stylesStruct.height.value*(this._turnPoint-pos)/(this._turnPoint)+
this._minHeight*pos/this._turnPoint+stylesStruct.height.unit;}else{newStruct.width=stylesStruct.width.value*(1-(pos-this._turnPoint)/(1-this._turnPoint))+stylesStruct.width.unit;}
return newStruct;},modifiedStyles:{overflow:'hidden'}};CustomEffects.ShrinkEffectStrategy={affectedStyles:['top','left','width','height','lineHeight','fontSize','position','overflow'],calculatedStyles:['top','left','width','height','fontSize','lineHeight'],initInternalValues:function(element){switch(this.direction){case'top-left':this._internalValues.x=this._internalValues.y=0;break;case'top-right':this._internalValues.x=0;this._internalValues.y=1;break;case'bottom-left':this._internalValues.x=1;this._internalValues.y=0;break;case'bottom-right':this._internalValues.x=this._internalValues.y=1;break;case'center':this._internalValues.x=this._internalValues.y=0.5;break;}
this._internalValues._topStep=this._internalValues.x*2;this._internalValues._leftStep=this._internalValues.y*2;},transition:function(pos,stylesStruct){var newStruct={};newStruct.top=stylesStruct.top.value+stylesStruct.height.value/2*pos*this._internalValues._topStep+stylesStruct.top.unit;newStruct.left=stylesStruct.left.value+stylesStruct.width.value/2*pos*this._internalValues._leftStep+stylesStruct.left.unit;newStruct.width=stylesStruct.width.value*(1-pos)+stylesStruct.width.unit;newStruct.height=stylesStruct.height.value*(1-pos)+stylesStruct.height.unit;newStruct.fontSize=stylesStruct.fontSize.value*(1-pos)+stylesStruct.fontSize.unit;newStruct.lineHeight=stylesStruct.lineHeight.value*(1-pos)+stylesStruct.lineHeight.unit;return newStruct;},modifiedStyles:{position:['relative','absolute','fixed'],overflow:'hidden'}};CustomEffects.BlindDownEffectStrategy={affectedStyles:['height','overflow'],calculatedStyles:['height'],initInternalValues:function(element){},transition:function(pos,stylesStruct){var newStruct={};newStruct.height=stylesStruct.height.value*pos+stylesStruct.height.unit;return newStruct;},modifiedStyles:{overflow:'hidden'}};CustomEffects.SlideEffectStrategy={affectedStyles:['top','left','position'],calculatedStyles:['top','left'],_offset:1,initInternalValues:function(element){this._internalValues._leftStep=0;this._internalValues._topStep=0;switch(this.direction){case'left':this._internalValues._leftStep=1;break;case'right':this._internalValues._leftStep=-1;break;case'bottom':this._internalValues._topStep=-1;break;case'top':this._internalValues._topStep=1;break;}
var dims=element.getDimensions();this._internalValues.height=dims.height;this._internalValues.width=dims.width;if(this._offset==-1){this._internalValues._offsetLeft=this._internalValues._offsetTop=0;}else{this._internalValues._offsetLeft=-1*this._offset*this._internalValues.width*this._internalValues._leftStep;this._internalValues._offsetTop=-1*this._offset*this._internalValues.height*this._internalValues._topStep;}
this._internalValues._topStep=this._internalValues._topStep*this._offset;this._internalValues._leftStep=this._internalValues._leftStep*this._offset;},transition:function(pos,stylesStruct){var newStruct={};newStruct.top=stylesStruct.top.value+this._internalValues._offsetTop+this._internalValues._topStep*this._internalValues.height*pos+stylesStruct.top.unit;newStruct.left=stylesStruct.left.value+this._internalValues._offsetLeft+this._internalValues._leftStep*this._internalValues.width*pos+stylesStruct.left.unit;return newStruct;},modifiedStyles:{position:['relative','absolute','fixed']}};CustomEffects.BlindUpEffectStrategy={affectedStyles:['height','overflow'],calculatedStyles:['height'],initInternalValues:function(element){},transition:function(pos,stylesStruct){var newStruct={};newStruct.height=stylesStruct.height.value*(1-pos)+''+stylesStruct.height.unit;return newStruct;},modifiedStyles:{overflow:'hidden'}};CustomEffects.AppearEffectStrategy={affectedStyles:['opacity'],calculatedStyles:['opacity'],transition:function(pos,stylesStruct){var newStruct={};newStruct.opacity=pos;return newStruct;},modifiedStyles:{}};CustomEffects.FadeEffectStrategy={affectedStyles:['opacity'],calculatedStyles:['opacity'],transition:function(pos,stylesStruct){var newStruct={};newStruct.opacity=1-pos;return newStruct;},modifiedStyles:{}};CustomEffects.PuffEffectStrategy={affectedStyles:['top','left','width','height','lineHeight','fontSize','position','opacity'],calculatedStyles:['top','left','fontSize','lineHeight','opacity'],initInternalValues:function(element){var dims=element.getDimensions();this._internalValues.height=dims.height;this._internalValues.width=dims.width;},transition:function(pos,stylesStruct){var newStruct={};newStruct.top=stylesStruct.top.value-pos*this._internalValues.height/2+"px";newStruct.left=stylesStruct.left.value-pos*this._internalValues.width/2+"px";newStruct.height=this._internalValues.height*(1+pos)+"px";newStruct.width=this._internalValues.width*(1+pos)+"px";newStruct.lineHeight=stylesStruct.lineHeight.value*(1+pos)+stylesStruct.lineHeight.unit;newStruct.fontSize=stylesStruct.fontSize.value*(1+pos)+stylesStruct.fontSize.unit;newStruct.opacity=1-pos;return newStruct;},modifiedStyles:{position:'absolute',height:'auto',width:'auto'}};CustomEffects.GrowEffectStrategy={affectedStyles:['top','left','width','height','lineHeight','fontSize','position','overflow'],calculatedStyles:['top','left','width','height','fontSize','lineHeight'],initInternalValues:function(element){switch(this.direction){case'top-left':this._internalValues.x=this._internalValues.y=0;break;case'top-right':this._internalValues.x=1;this._internalValues.y=0;break;case'bottom-left':this._internalValues.x=0;this._internalValues.y=1;break;case'bottom-right':this._internalValues.x=this._internalValues.y=1;break;case'center':this._internalValues.x=this._internalValues.y=0.5;break;}
this._internalValues._topStep=this._internalValues.y*2;this._internalValues._leftStep=this._internalValues.x*2;},transition:function(pos,stylesStruct){var newStruct={};newStruct.top=stylesStruct.top.value+this._internalValues.y*stylesStruct.height.value-stylesStruct.height.value/2*pos*this._internalValues._topStep+stylesStruct.top.unit;newStruct.left=stylesStruct.left.value+this._internalValues.x*stylesStruct.width.value-stylesStruct.width.value/2*pos*this._internalValues._leftStep+stylesStruct.left.unit;newStruct.width=stylesStruct.width.value*pos+stylesStruct.width.unit;newStruct.height=stylesStruct.height.value*pos+stylesStruct.height.unit;newStruct.lineHeight=stylesStruct.lineHeight.value*pos+stylesStruct.lineHeight.unit;newStruct.fontSize=stylesStruct.fontSize.value*pos+stylesStruct.fontSize.unit;return newStruct;},modifiedStyles:{position:['relative','absolute','fixed'],overflow:'hidden'}};CustomEffects.DropOutEffectStrategy={affectedStyles:['top','position','opacity'],calculatedStyles:['height'],transition:function(pos,stylesStruct){var newStruct={};newStruct.top=stylesStruct.height.value*pos+stylesStruct.height.unit;newStruct.opacity=1-pos;return newStruct;},modifiedStyles:{position:['relative','absolute','fixed']}};Object.copyAllFields=function(destination,source){for(var property in source){destination[property]=source[property];}
return destination;};CustomEffects.EffectExecutor=Class.create();Object.extend(CustomEffects.EffectExecutor,{fps:5,duration:20,initialize:function(id,options){this.element=$(id);this._internalValues={};this._unitsList={};this._calculatedProperties={};this._oldProperties={};this._startTime=null;this._stopTime=null;this.progress=0;Object.copyAllFields(this,options);this._interval=1/this.fps;this._duration=this.duration*1000;this._enableIEOpacity(this.element);this._doInit();this._start();},_isHidden:function(styles){return(styles.visibility=='hidden')||(styles.display=='none');},_doInit:function(){var oldStyles={};oldStyles.visibility=this.element.getStyle('visibility');oldStyles.display=this.element.getStyle('display');if(this._isHidden(oldStyles)){this.element.setStyle({visibility:'hidden',display:'block'});}
this.initInternalValues(this.element);this.internalStart(this.element);this._init();if(this._isHidden(oldStyles)){this.element.setStyle(oldStyles);}},hideInputElements:function(){if(Prototype.netFront()){var netFrontBadBehaveElementsList=['area','button','input','select','textarea'];var nodes;for(var i=0;i<netFrontBadBehaveElementsList.length;i++){nodes=this.element.getElementsByTagName(netFrontBadBehaveElementsList[i]);for(var j=0;j<nodes.length;j++){nodes[j]._oldVisibility=nodes[j].style.visibility;nodes[j].style.visibility='hidden';}}}},showInputElements:function(){if(Prototype.netFront()){var netFrontBadBehaveElementsList=['area','button','input','select','textarea'];var nodes;for(var i=0;i<netFrontBadBehaveElementsList.length;i++){nodes=this.element.getElementsByTagName(netFrontBadBehaveElementsList[i]);for(var j=0;j<nodes.length;j++){nodes[j].style.visibility=nodes[j]._oldVisibility;}}}},_enableIEOpacity:function(element){if(element.currentStyle&&(!this.element.currentStyle.hasLayout)){element.setStyle({zoom:1});}},_init:function(){this._startTime=new Date().getTime();this._stopTime=this._startTime+this._duration;var it=this;this.affectedStyles.each(function(propertyName,index){var propertyValue;if(CustomEffects.specialElementGetMethods[propertyName]){propertyValue=it.element[CustomEffects.specialElementGetMethods[propertyName]]();}else{propertyValue=it.element.getNotNullStyle(propertyName);}
it._oldProperties[propertyName]=propertyValue;});this.calculatedStyles.each(function(propertyName,index){it._calculatedProperties[propertyName]=CustomEffects[CustomEffects.specialEffectMethods[propertyName]](it.element);it._unitsList[propertyName]=it._calculatedProperties[propertyName].unit;});var modifiedStyles=this._prepareModifiedStyles();this.element.setStyle(modifiedStyles);},_prepareModifiedStyles:function(){var localStyles={};for(var property in this.modifiedStyles){var array=this.modifiedStyles[property];if(typeof(array)!='string'){var value=this.element.getStyle(property);if(array.indexOf(value)==-1){localStyles[property]=array[0];}}else{localStyles[property]=array;}}
return localStyles;},_cleanup:function(){var propertyStructure={};for(propertyName in this._oldProperties){if(CustomEffects.specialElementSetMethods[propertyName]){this.element[CustomEffects.specialElementSetMethods[propertyName]](this._oldProperties[propertyName]);}else{propertyStructure[propertyName]=this._oldProperties[propertyName];}}
this.element.setStyle(propertyStructure);},_start:function(){var newProperties=this.transition(0.001,this._calculatedProperties);this._update(newProperties);this.element.show();this.executor=new UpdatedExecuter(this._run.bind(this),this._interval);},_run:function(){var currentTime=new Date().getTime();var progress=(currentTime-this._startTime)/(this._stopTime-this._startTime);if(currentTime<this._stopTime){var newProperties=this.transition(progress,this._calculatedProperties);this._update(newProperties);}else{this.executor.stop();this._finish();}},_updateSpecialStyles:function(properties){var simpleProperties={};for(property in properties){if(CustomEffects.specialElementSetMethods[property]){var pValue=properties[property];this.element[CustomEffects.specialElementSetMethods[property]](pValue);}else{simpleProperties[property]=properties[property];}}
return simpleProperties;},_update:function(properties){var simpleProperties=this._updateSpecialStyles(properties);this.element.setStyle(simpleProperties);},_finish:function(){this._cleanup();this.internalFinish(this.element);this.afterFinish();},afterFinish:function(){},internalStart:function(element){},internalFinish:function(element){}});CustomEffects.createEffect=function(){var effect=Class.create();Object.extend(effect.prototype,CustomEffects.EmptyEffectStrategy);for(var i=0;i<arguments.length;i++){Object.extend(effect.prototype,arguments[i]);}
return effect;};CustomEffects.AppearPulsateEffect=CustomEffects.createEffect(CustomEffects.PulsateEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.setOpacity(0.9999999);},internalFinish:function(element){element.show();}});CustomEffects.DisappearPulsateEffect=CustomEffects.createEffect(CustomEffects.PulsateEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.setOpacity(0.9999999);},internalFinish:function(element){element.hide();}});CustomEffects.ShrinkEffect=CustomEffects.createEffect(CustomEffects.ShrinkEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){this.hideInputElements();},internalFinish:function(element){this.showInputElements();element.hide();}});CustomEffects.GrowEffect=CustomEffects.createEffect(CustomEffects.GrowEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){this.hideInputElements();},internalFinish:function(element){this.showInputElements();}});CustomEffects.PuffEffect=CustomEffects.createEffect(CustomEffects.PuffEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.setOpacity(0.9999999);},internalFinish:function(element){element.hide();}});CustomEffects.ShakeDisappearEffect=CustomEffects.createEffect(CustomEffects.ShakeEffectStrategy,CustomEffects.EffectExecutor,{internalFinish:function(element){element.hide();}});CustomEffects.ShakeAppearEffect=CustomEffects.createEffect(CustomEffects.ShakeEffectStrategy,CustomEffects.EffectExecutor);CustomEffects.BlindDownEffect=CustomEffects.createEffect(CustomEffects.BlindDownEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.show();this.hideInputElements();},internalFinish:function(element){this.showInputElements();}});CustomEffects.BlindUpEffect=CustomEffects.createEffect(CustomEffects.BlindUpEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){this.hideInputElements();},internalFinish:function(element){element.hide();this.showInputElements();}});CustomEffects.SlideAppearEffect=CustomEffects.createEffect(CustomEffects.SlideEffectStrategy,CustomEffects.EffectExecutor,{_offset:1,_hidenDiv:null,internalStart:function(element){var parent=element.parentNode;if(Prototype.operaMobile()){this._hidenDiv=document.createElement('div');this._hidenDiv=$(this._hidenDiv);this._hidenDiv.setStyle({height:'200%',width:'200%',backgroundColor:'transparent',position:'absolute',top:'0',left:'0'});parent.insertBefore(this._hidenDiv,element);}
var newDiv=CustomEffects._createOuterDiv(element);parent.insertBefore(newDiv,element);newDiv.appendChild(element);},internalFinish:function(element){CustomEffects._removeOuterDiv(element);if(Prototype.operaMobile()){var mainElement=element.parentNode;mainElement.removeChild(this._hidenDiv);}}});CustomEffects.SlideDisppearEffect=CustomEffects.createEffect(CustomEffects.SlideEffectStrategy,CustomEffects.EffectExecutor,{_offset:-1,_hidenDiv:null,internalStart:function(element){var parent=element.parentNode;if(Prototype.operaMobile()){this._hidenDiv=document.createElement('div');this._hidenDiv=$(this._hidenDiv);this._hidenDiv.setStyle({height:'200%',width:'200%',backgroundColor:'transparent',position:'absolute',top:'0',left:'0'});parent.insertBefore(this._hidenDiv,element);}else if(Prototype.operaPC()){this._hidenDiv=document.createElement('div');this._hidenDiv=$(this._hidenDiv);this._hidenDiv.setStyle({height:'110%',width:'10%',backgroundColor:'transparent',position:'fixed',top:'0',left:'0'});parent.insertBefore(this._hidenDiv,element);}
var newDiv=CustomEffects._createOuterDiv(element);newDiv=$(newDiv);if(Prototype.msieBrowser()&&element.getStyle('position')=='static'){newDiv.setStyle({position:'relative',left:'0px',top:'0px'});}else{newDiv.setStyle({position:element.getStyle('position')});}
parent.insertBefore(newDiv,element);newDiv.appendChild(element);newDiv.setStyle({overflow:'hidden'});},internalFinish:function(element){element.hide();CustomEffects._removeOuterDiv(element);if(Prototype.operaMobile()||Prototype.operaPC()){var mainElement=element.parentNode;mainElement.removeChild(this._hidenDiv);}}});CustomEffects.FoldEffect=CustomEffects.createEffect(CustomEffects.FoldEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){this.hideInputElements();},internalFinish:function(element){this.showInputElements();element.hide();}});CustomEffects.DropOutEffect=CustomEffects.createEffect(CustomEffects.DropOutEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.setOpacity(0.9999999);},internalFinish:function(element){element.hide();}});CustomEffects.FadeEffect=CustomEffects.createEffect(CustomEffects.FadeEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.setOpacity(0.9999999);},internalFinish:function(element){element.hide();}});CustomEffects.AppearEffect=CustomEffects.createEffect(CustomEffects.AppearEffectStrategy,CustomEffects.EffectExecutor,{internalStart:function(element){element.setOpacity(0.9999999);}});