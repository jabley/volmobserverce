
Widget.Popup=Widget.define({initialize:function(id,blockId,options){this.initializeWidget(id,options);this.id=id;this.element=$(blockId);this.element.style.zIndex=3;this.block=$W(blockId);this.fullScreen=false;Object.copyFields(this,options||{});this._applyWorkarounds();this.observe(this.block,"isHiddenChanged","_blockHiddenChanged");this.addAction('dismiss');this.addAction('show');this.addEvent("dismissed");},show:function(){if(this.canShow()){this.block.show();}},dismiss:function(dismissType){if(this.canDismiss(dismissType)){this.block.hide();this.notifyObservers("dismissed",dismissType);}},hide:function(){this.dismiss();},canShow:function(){return this.block.isHidden();},canDismiss:function(){return(!this.block.isHidden());},isHidden:function(){return this.block.isHidden();},_blockHiddenChanged:function(){this.notifyObservers("canShowChanged");this.notifyObservers("canDismissChanged");},_applyWorkarounds:function(){if(this.fullScreen&&window.opera){if(window.innerHeight<this.element.scrollHeight||window.innerWidth<this.element.scrollWidth){Element.setStyle(this.element,{'position':'absolute','height':this.element.scrollHeight+'px','width':this.element.scrollWidth+'px','top':'0px','left':'0px','z-index':'2','visibility':'visible','display':'none'});var p=document.createElement("p");this.element.firstChild.appendChild(p);}}
if(Element.getStyle(this.element,'visibility')!='visible'){Element.setStyle(this.element,{display:'none'});Element.setStyle(this.element,{visibility:'visible'});}
if(Prototype.msieBrowser()&&Element.getStyle(this.element,'position')=='fixed'){Element.setStyle(this.element,{'position':'absolute'});}}});