<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>
<!--
This file is part of Volantis Mobility Server. 

Volantis Mobility Server is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Volantis Mobility Server is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Volantis Mobility Server.  If not, see <http://www.gnu.org/licenses/>. 
-->

<installation version="1.0" xmlns:xi="http://www.izforge.com/izpack/include">
    <info>
        <appname>Message Preparation Server</appname>
        <appversion>5.0</appversion>
	<appsubpath>MCS</appsubpath>
        <authors>
            <author name="Volantis Systems Ltd." email="info@volantis.com"/>
        </authors>
        <url>http://www.volantis.com/</url>
        <summarylogfilepath>$INSTALL_PATH/Uninstaller/MPSInstallSummary.html</summarylogfilepath>
	<uninstaller write="no" />
    </info>
    
    <!-- 
        The gui preferences indication.
        Sets the installer window to 640x480. It will not be able to change the size.
    -->
    <guiprefs width="800" height="600" resizable="yes">
        <modifier key="showDebugWindow" value="true"/>
        <modifier key="headingPanelCounter" value="progressbar"/>
        <modifier key="headingPanelCounterPos" value="inNavigationPanel"/>
        <modifier key="useHeadingPanel" value="yes"/>
        <modifier key="useHeadingForSummary" value="no"/>
        <modifier key="headingLineCount" value="0"/>
        <modifier key="headingImageBorderSize" value="0"/>
        <modifier key="headingBackgroundColor" value="0x00335e98"/>
        <modifier key="headingForegroundColor" value="0x00335e98"/>
    </guiprefs>
    
    <jar src="jar/ant/ant.jar" stage="both" />
    <jar src="jar/ant/ant-launcher.jar" stage="both" />
    
    <listeners>
	<listener installer="SummaryLoggerInstallerListener"/>
        <listener installer="AntActionInstallerListener"/>
    </listeners>

    <!-- 
        The locale section.
        Asks here to include the English and French langpacks.
    -->
    <locale>
        <langpack iso3="eng"/>
    </locale>
    
    <!-- 
        The resources section.
        The ids must be these ones if you want to use the LicencePanel and/or the InfoPanel.
    -->
    <resources>
        <res id="HTMLLicencePanel.licence" src="license.htm"/>
        <res id="HTMLInfoPanel.info" src="Readme.htm"/>
        <res id="userInputSpec.xml" src="userInputSpec.xml"/>
	<res id="packsLang.xml_eng" src="packsLang.xml_eng" />
	<res id="userInputLang.xml_eng" src="userInputLang.xml_eng" />
	<res id="AntActionsSpec.xml" src="AntActionsSpec.xml"/>
        <res id="CustomLangpack.xml" src="customLangpack.xml"/>

        <!-- images: banner, and left side image -->
        <res id="Heading.image" src="img/mps_installer_banner.png"/>

        <!-- custom icons description -->
        <res id="customicons.xml" src="customicons.xml"/>

        <!-- custom icons -->
        <res id="star.png" src="img/star.png"/>
        <res id="important.png" src="img/important.png"/>
        <res id="gear.png" src="img/gear.png"/>
        <res id="notepad.png" src="img/notepad.png"/>

    </resources>
   
     <variables>
        <variable name="mcsMAPUseCache" value="off"/> 
        <variable name="InstallerFrame.cleanAllAtInterrupt" value="no"/>
    </variables> 

     <dynamicvariables>
        <variable name="mcs.config.file" value="${INSTALL_PATH}/webapps/mcs/WEB-INF/mcs-config.xml"/> 
        <variable name="mcs.log4j.config.file" value="${INSTALL_PATH}/webapps/mcs/WEB-INF/mcs-log4j.xml"/>
        <variable name="mpsWapPushMSSConfig" value="${INSTALL_PATH}/webapps/mcs/WEB-INF"/>
        <variable name="mpsWapPushMSSLog" value="${INSTALL_PATH}/webapps/mcs/WEB-INF"/>

        <!-- mss-log4j.xml -->
        <variable name="mss.log.fileappend" value="false"/>
        <variable name="mss.message.store.log" value="${INSTALL_PATH}/webapps/mcs/logs/mcs.log"/>
        <variable name="mss.log.conversionpattern" value="%d{dd MMM HH:mm:ss} [%t] %-5p %c %x - %m%n"/>
        <variable name="mss.log.locationinfo" value="false"/>
        <variable name="mss.log.level" value="error"/>
    </dynamicvariables> 

    <!-- 
        The panels section.
        We indicate here which panels we want to use. The order will be respected.
    -->
    <panels>
        <panel classname="HelloPanel"/>
        <panel classname="HTMLInfoPanel"/>
        <panel classname="HTMLLicencePanel"/>
        <panel classname="PacksPanel"/> 
        <panel classname="UserInputPanel"/>
        <panel classname="UserInputPanel"/>
        <panel classname="UserInputPanel"/>
        <panel classname="UserInputPanel"/>
        <panel classname="TargetPanel"/> 
    <!-- <panel classname="DataCheckPanel" />  -->
        <panel classname="SummaryPanel"/> 
        <panel classname="InstallPanel"/>
        <panel classname="FinishPanel"/> 
    </panels>
    
    <packs>  
	<pack name="MPS" required="yes" id="base">  
	    <description>Message Preparation Server</description>
            <file src="ant-build.xml" targetdir="$INSTALL_PATH"/>
            <fileset dir="../../target/dependency" targetdir="${INSTALL_PATH}/webapps/mcs/WEB-INF/lib/">
                <include name="**/commons-collections-2.1.jar" />
                <include name="**/commons-pool-1.2.jar" />
                <include name="**/core-resources-3.0.1.jar" />
                <include name="**/core-runtime-3.0.1.jar" />
                <include name="**/javacc-4.0.jar" />
                <include name="**/jaxen-1.1.1.jar" />
                <include name="**/mps.architecture-api-5.0.jar" />
                <include name="**/mps.bms-api-5.0.jar" />
                <include name="**/mps.bms-impl-5.0.jar" />
                <include name="**/mps.localization-api-5.0.jar" />
                <include name="**/mps.runtime-api-5.0.jar" />
                <include name="**/mps.runtime-impl-5.0.jar" />
                <include name="**/mps.sample-api-5.0.jar" />
                <include name="**/mps.testtools-api-5.0.jar" />
                <include name="**/mps.version-api-5.0.jar" />
                <include name="**/smpp-2.0.jar" />
                <include name="**/stax-api-1.0.1.jar" />
                <include name="**/tidy-1.0.jar" />
                <include name="**/xalan-2.6.0.jar" />
                <include name="**/xercesImpl-2.0.2.jar" />
                <include name="**/xml-apis-1.0.b2.jar" />
                <include name="**/xmlParserAPIs-2.6.2.jar" />
                <include name="**/xom-1.0.jar" />
            </fileset>
	    <fileset dir="../../target/WEB-INF" targetdir="${mpsWapPushMSSConfig}">
		<include name="**/mss-config.xml" />
            </fileset>
	    <fileset dir="../../target/WEB-INF" targetdir="${mpsWapPushMSSLog}">
		<include name="**/mss-log4j.xml" />
		<include name="**/log4j.dtd" />
            </fileset>
	    <parsable targetfile="${mpsWapPushMSSConfig}/mss-config.xml" type="xml" />
	    <parsable targetfile="${mpsWapPushMSSLog}/mss-log4j.xml" type="xml" />
	</pack>

	<pack name="Samples" required="no" id="samples">
	    <description>Samples</description>
            <fileset dir="../../target/samples" targetdir="${INSTALL_PATH}/webapps/mcs">
              <include name="**/*" />
            </fileset>
	</pack>
 
	<pack name="Documentation" required="no" id="docs">
	    <description>Documentation</description>
            <fileset dir="../../target/documentation" targetdir="${INSTALL_PATH}/documentation">
              <include name="**/*" />
            </fileset>
	</pack>

    </packs>
</installation>
