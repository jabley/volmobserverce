<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/xml;charset=UTF-8"/><title>Folding Item widget</title><link rel="stylesheet" href="../volantis.css"/></head><body><table class="header"><tr><td class="navcontainer"><ul class="navlist"><li><a href="../client_learn/clientTutorial_about.html" title="Using the widget library">Start</a></li><li><a href="../client_learn/clientTutorial_carousel_ajax.html" title="Carousel with AJAX">Previous</a></li><li><a href="../client_learn/clientTutorial_forms_validator_multiple.html" title="Validating multiple forms">Next</a></li></ul></td></tr></table><h1>Folding Item widget</h1>
    <p>The Folding Item widget provides a mechanism by which content can be included within the
      page, but not made visible initially. It is made visible when the user requests it to be
      opened by selecting an action. The content that is revealed may be downloaded with the initial
      page or from an external source via AJAX. In the latter case, the download may be deferred
      until the item is opened.</p>
    <p>The following example illustrates use of AJAX with the Folding Item widget. See also <em>Hiding and showing content</em>.</p>
    <p><img src="../graphics/cfTutorial/foldingitem-ajax.png" alt="Folding Item widget" title="Folding Item widget"/></p>
  <h2>Hiding and showing content <a href="../client/wag_widgets_folding_item.html"><img src="../icons/icon_help.png" border="0" alt="Learn More"/></a></h2><ol><li>The <span class="code">widget:folding-item</span> element defines the widget<pre class="code">
&lt;widget:folding-item&gt;
  &lt;widget:summary&gt;Vienna&lt;/widget:summary&gt;
  &lt;widget:detail&gt;
    &lt;widget:load src="service/folding-item?itemId=Vienna"/&gt;
  &lt;/widget:detail&gt;
&lt;/widget:folding-item&gt;</pre></li><li>The <span class="code">widget:summary</span> and <span class="code">widget:detail</span> elements
      provide short description and full details of an item, respectively. The content of the
        <span class="code">widget:detail</span> is made visible when <span class="code">widget:summary</span> is
      clicked. In our case, the load action is used to download the details of the item from the
      AJAX service built into MCS.</li></ol><h2>Load, refresh and fetch actions <a href="../client/wag_widgets_actions.html"><img src="../icons/icon_help.png" border="0" alt="Learn More"/></a></h2><ol><li>The following element allows a widget to load its content from an external source<pre class="code">
&lt;widget:load src="service/folding-item?itemId=Vienna"/&gt;</pre></li><li>The <span class="code">src</span> attribute defines the URL from which the widget content can be
      retrieved</li><li>The <span class="code">when</span> attribute indicates when the widget should load its content. It is
      possible to defer loading of the content until the user requests it, by setting the
        <span class="code">when</span> attribute to 'defer'.</li></ol><h2>Widget response structure <a href="../client/wag_widgets_structure.html"><img src="../icons/icon_help.png" border="0" alt="Learn More"/></a></h2><ol><li>The AJAX service must provide the response in the following form<pre class="code">
&lt;response:response xmlns="http://www.w3.org/2002/06/xhtml2"
  xmlns:mcs="http://www.volantis.com/xmlns/2006/01/xdime/mcs"
  xmlns:response="http://www.volantis.com/xmlns/2006/05/widget/response"&gt;
  &lt;response:head&gt;
    &lt;response:link rel="mcs:theme" href="/main.mthm"/&gt;
  &lt;/response:head&gt;
  &lt;response:body&gt;
    &lt;response:folding-item&gt;
      &lt;div&gt;Weather conditions in &lt;a href="http://www.wien.gv.at/"&gt;Vienna&lt;/a&gt;: 22°C,
        chance of thunderstorms&lt;/div&gt;
    &lt;/response:folding-item&gt;
  &lt;/response:body&gt;
&lt;/response:response&gt;</pre></li><li>The <span class="code">response:folding-item</span> element contains details of the selected
    item</li></ol><h2>Complete XDIME 2 code</h2><ol><li>Create a <span class="filepath">ajax-foldingitem.xdime</span> file</li><li>Modify the <span class="filepath">ajax-foldingitem.xdime</span> file by including the following code<pre class="code">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;html xmlns="http://www.w3.org/2002/06/xhtml2"
  xmlns:mcs="http://www.volantis.com/xmlns/2006/01/xdime/mcs"
  xmlns:template="http://www.volantis.com/xmlns/marlin-template"
  xmlns:widget="http://www.volantis.com/xmlns/2006/05/widget"&gt;
  &lt;head&gt;
    &lt;title&gt;Folding Item Widget with AJAX&lt;/title&gt;
    &lt;link rel="mcs:theme" href="/themes/main.mthm"/&gt;
    &lt;link rel="mcs:layout" href="/layouts/main.mlyt"/&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;template:apply href="templates/demo-main.xdtpl"&gt;
      &lt;template:binding name="title" value="Folding Item w/AJAX"/&gt;
      &lt;template:binding name="content"&gt;
        &lt;template:complexValue&gt;
          &lt;div class="widget"&gt;
            &lt;widget:folding-item&gt;
              &lt;widget:summary&gt;Ankara&lt;/widget:summary&gt;
              &lt;widget:detail&gt;
                &lt;widget:load src="service/folding-item?itemId=Ankara"/&gt;
              &lt;/widget:detail&gt;
            &lt;/widget:folding-item&gt;
            &lt;widget:folding-item&gt;
              &lt;widget:summary&gt;Beograd&lt;/widget:summary&gt;
              &lt;widget:detail&gt;
                &lt;widget:load src="service/folding-item?itemId=Beograd"/&gt;
              &lt;/widget:detail&gt;
            &lt;/widget:folding-item&gt;
            &lt;widget:folding-item&gt;
              &lt;widget:summary&gt;Cracow&lt;/widget:summary&gt;
              &lt;widget:detail&gt;
                &lt;widget:load src="service/folding-item?itemId=Cracow"/&gt;
              &lt;/widget:detail&gt;
            &lt;/widget:folding-item&gt;
            &lt;widget:folding-item&gt;
              &lt;widget:summary&gt;Vienna&lt;/widget:summary&gt;
              &lt;widget:detail&gt;
                &lt;widget:load src="service/folding-item?itemId=Vienna"/&gt;
              &lt;/widget:detail&gt;
            &lt;/widget:folding-item&gt;
            &lt;widget:folding-item&gt;
              &lt;widget:summary&gt;Zagreb&lt;/widget:summary&gt;
              &lt;widget:detail&gt;
                &lt;widget:load src="service/folding-item?itemId=Zagreb"/&gt;
              &lt;/widget:detail&gt;
            &lt;/widget:folding-item&gt;
          &lt;/div&gt;
        &lt;/template:complexValue&gt;
      &lt;/template:binding&gt;
    &lt;/template:apply&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></li></ol><h2>Checklist</h2>
    <table cellspacing="0"><thead><tr><th class="firsthdr">Name</th><th>Purpose</th></tr></thead><tbody><tr><th class="firstcell"><a href="../xdime_cp/xdime_cp_div.html">div</a></th><td><p>A section used to add extra structure to documents. Style sheets can be used to control the
        presentation.</p></td></tr><tr><th class="firstcell"><a href="../xdime_cp/response_folding_item.html">response:folding-item</a></th><td><p>Allows a Folding Item widget to load its content.</p></td></tr><tr><th class="firstcell"><a href="../xdime_cp/widget_detail.html">widget:detail</a></th><td><p>Specifies the content of the widget that is initially hidden. It is made visible when the
          <span class="code">widget:summary</span> content is clicked. May contain XDIME 2 block elements
        in addition to nested folding items.</p></td></tr><tr><th class="firstcell"><a href="../xdime_cp/widget_folding_item.html">widget:folding-item</a></th><td><p>Outer container for a Folding Item widget that displays a summary of its contents, and when
        activated, reveals more detailed content.</p></td></tr><tr><th class="firstcell"><a href="../xdime_cp/widget_load.html">widget:load</a></th><td><p>Controls the loading of a widget's contents in relation to the containing page.</p></td></tr><tr><th class="firstcell"><a href="../xdime_cp/widget_summary.html">widget:summary</a></th><td><p>Defines the visible title, label or thumbnail for content that is initially hidden.
        Clicking on the element content makes the <span class="code">widget:detail</span> visible.</p></td></tr><tr><th class="firstcell"><a href="../xdime_cp/core_attr_cp.html">Core attributes</a></th><td><p>Attributes that are common to XDIME 2 elements.</p></td></tr></tbody></table>
  </body></html>