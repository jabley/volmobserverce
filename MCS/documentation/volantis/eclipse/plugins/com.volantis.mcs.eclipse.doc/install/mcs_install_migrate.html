<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <meta content="application/xhtml+xml" http-equiv="Content-Type"/>
      <title>Migrating a repository</title>
      <link rel="stylesheet" href="../volantis.css"/>
   </head>
   <body>
      <h1>Migrating a repository</h1>
      
      <p>If you have an existing MCS installation you should check the
         current version number, and migrate the MCS repository to a
         new version, before developing or modifying any existing policies. The reason for this that there are likely to be changes to the XML and database schema structures in the new version.</p>
      
         
             
      <p>In a UNIX environment, you can run the necessary command-line
         interface (CLI) commands from any location. On MS Windows,
         you need to run them from the <span class="filepath">mcs/bin</span> directory.</p>
         
      <p class="note">
         <strong>Note</strong>: 
			You should allow sufficient time. A large
            repository with a may take a long time to export, migrate,
            and import.</p>
      
         
      <h2>Checking the current version of MCS</h2>
         
      <p>You can check the version by issuing the
               <span class="command">mcsVersion</span> command from the
               <span class="filepath">mcs/bin</span> directory of
            your MCS installation.</p>
      
      
         
      <h2>Migrating the repository</h2>
         
      <p>The steps in migrating a repository include:</p>
         
      <ul>
         
         <li>Exporting the existing JDBC repository to a local XML repository format</li>
         
         <li>Installing the new version of MCS</li>
         
         <li>Importing the XML repository to the database</li>
         
      </ul>
         
         
      <p>The commands in the migration process depend on the version
            of MCS you are upgrading. For versions prior to version
            MCS 3.0 you use the <span class="command">mcsMigrate</span> command
            to export a runtime JDBC repository to an XML repository.
            For MCS 3.0 and later you use the
            <span class="command">mcsExport</span> command.</p>
            
           
         
      <p>The <span class="command">mcsMigrate</span> command uses the
            following syntax. See the <em>Importing and exporting repositories</em>
            for details of the <span class="command">mcsExport</span> command
            parameters. </p>
         
      <pre class="code">mcsMigrate
   [-vendor &lt;vendor&gt; -host &lt;host&gt; -port &lt;port&gt; -source &lt;source&gt;
    -user &lt;user&gt; -password &lt;password&gt;]
   [-all | -allcomponents |
           -assetgroup [&lt;asset groups&gt;]
           -audio [&lt;audio components&gt;]
           -button [&lt;button components&gt;]
           -chart [&lt;chart components&gt;]
           -dynvis [&lt;dynvis components&gt;]
           -image [&lt;image components&gt;]
           -rollover [&lt;rollover components&gt;]
           -script [&lt;script components&gt;]
           -text  [&lt;text components&gt;]
           -link [&lt;link-components&gt;]]
   [-theme [&lt;themes&gt;]]
   [-device [&lt;devices&gt;]]
   [-layout [&lt;layouts&gt;]]
   [-replacementchar &lt;-|_&gt;]
   [-destdir &lt;directory&gt;]
   [-srcfile &lt;name&gt;] </pre>
         
         
      <p>The <span class="command">mcsMigrate</span> command creates output in the
               <span class="code">destdir</span> you have specified. A
               <span class="filepath">devices.mdpr</span> file contains the
            device repository. MCS policies for layouts, themes and
            components are created in a project directory.</p>
         
      <p>The <span class="command">mcsExport</span> command does not export a device
            repository. The latest version of the device repository
            will be installed with the new version of MCS.</p>
            
          
         
      <p>After you have installed the new version of MCS, you will need to set up the database with a new user and create new tables. Then you can use the <span class="command">mcsImport</span>
            to import the migrated  XML repository into the JDBC
            repository. See <em>Importing and exporting repositories</em> for
            details of the command parameters.</p>
         
      
      
      <p class="note">
         <strong>Note</strong>: 
			If you have large numbers of JSPs that need  migration, please contact your vendor representative.</p>
      
      
         
      <p>
         <span class="ri">Related topics</span>
         <br/>
         <a href="../install/mcs_install_oview.html">Installing MCS</a>
         <br/>
         <a href="../admin/mcs_import_export.html">Importing and exporting repositories</a>
      </p>
      
   
   </body>
</html>